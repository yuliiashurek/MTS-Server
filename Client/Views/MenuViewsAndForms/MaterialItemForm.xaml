<Window x:Class="Client.Views.MaterialItemForm"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:hc="https://handyorg.github.io/handycontrol"
        Title="Матеріал" Height="550" Width="400"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Назва -->
            <StackPanel Grid.Row="0" Orientation="Vertical" Margin="0,10">
                <TextBlock Text="Назва матеріалу" />
                <TextBox Text="{Binding MaterialItem.Name, UpdateSourceTrigger=PropertyChanged}" />
            </StackPanel>

            <!-- Мінімальний запас + одиниця вимірювання -->
            <StackPanel Grid.Row="1" Orientation="Vertical" Margin="0,10">
                <DockPanel>
                    <TextBlock Text="Мінімальний запас" Margin="0,0,10,0" VerticalAlignment="Center"/>
                    <TextBlock Text="Одиниця вимірювання" VerticalAlignment="Center" />
                </DockPanel>

                <DockPanel LastChildFill="False" Margin="0,5,0,0">
                    <TextBox Width="100"
                             Text="{Binding MaterialItem.MinimumStock, UpdateSourceTrigger=PropertyChanged}"
                             Margin="0,0,10,0"/>

                    <ComboBox Width="170"
                              ItemsSource="{Binding MeasurementUnits}"
                              SelectedItem="{Binding SelectedMeasurementUnit}"
                              DisplayMemberPath="ShortName"
                              IsEditable="True"
                              IsTextSearchEnabled="True"
                              TextSearch.TextPath="ShortName"/>
                </DockPanel>
            </StackPanel>

            <!-- Категорія -->
            <StackPanel Grid.Row="2" Orientation="Vertical" Margin="0,10">
                <TextBlock Text="Категорія" />
                <ComboBox Width="250"
                          ItemsSource="{Binding Categories}"
                          SelectedItem="{Binding SelectedCategory}"
                          DisplayMemberPath="Name"
                          IsEditable="True"
                          IsTextSearchEnabled="True"
                          TextSearch.TextPath="Name"/>
            </StackPanel>

            <!-- Постачальник -->
            <StackPanel Grid.Row="3" Orientation="Vertical" Margin="0,10">
                <TextBlock Text="Постачальник" />
                <ComboBox Width="250"
                          ItemsSource="{Binding Suppliers}"
                          SelectedItem="{Binding SelectedSupplier}"
                          DisplayMemberPath="Name"
                          IsEditable="True"
                          IsTextSearchEnabled="True"
                          TextSearch.TextPath="Name"/>
            </StackPanel>

            <!-- Email-сповіщення -->
            <StackPanel Grid.Row="4" Orientation="Vertical" Margin="0,10">
                <TextBlock Text="Отримувачі сповіщень (email)" />
                <ListBox x:Name="EmailListBox"
                         ItemsSource="{Binding AvailableEmails}"
                         SelectionMode="Multiple"
                         Height="100"
                         BorderBrush="#CCC"
                         BorderThickness="1"
                         Padding="5"
                         ScrollViewer.VerticalScrollBarVisibility="Auto">
                    <ListBox.ItemContainerStyle>
                        <Style TargetType="ListBoxItem">
                            <Setter Property="Margin" Value="2"/>
                            <Setter Property="Cursor" Value="Hand"/>
                        </Style>
                    </ListBox.ItemContainerStyle>
                </ListBox>
            </StackPanel>

            <!-- Кнопки -->
            <StackPanel Grid.Row="5" Orientation="Horizontal" Margin="0,20">
                <Button Content="Зберегти" Width="100" Margin="0,0,10,0" Click="Save_Click"/>
                <Button Content="Скасувати" Width="100" Click="Cancel_Click"/>
            </StackPanel>
        </Grid>
    </ScrollViewer>
</Window>
